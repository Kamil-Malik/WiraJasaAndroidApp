Index: app/src/main/java/com/wirajasa/wirajasabisnis/data/model/UserProfile.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.data.model\r\n\r\ndata class UserProfile(\r\n    val uid: String,\r\n    val username: String,\r\n    val address: String,\r\n    val phone_number: String,\r\n    val photourl: String,\r\n    val seller: Boolean,\r\n    val createdAt: String\r\n) {\r\n    /*  Tolong jangan didelete constructor ini, karena untuk convert snapshot\r\n    kedalam dataclass secara otomatis l*/\r\n\r\n    constructor() : this(\r\n        \"\", \"\", \"\", \"\", \"\", false, \"\"\r\n    )\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/data/model/UserProfile.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/data/model/UserProfile.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/data/model/UserProfile.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/data/model/UserProfile.kt	(date 1669200945095)
@@ -5,7 +5,7 @@
     val username: String,
     val address: String,
     val phone_number: String,
-    val photourl: String,
+    var photourl: String,
     val seller: Boolean,
     val createdAt: String
 ) {
Index: app/src/main/java/com/wirajasa/wirajasabisnis/utility/Constant.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.utility\r\n\r\nobject Constant {\r\n    const val COLLECTION_USER = \"user\"\r\n    const val UID = \"uid\"\r\n    const val USERNAME = \"username\"\r\n    const val PHONE_NUMBER = \"phone_number\"\r\n    const val ADDRESS = \"address\"\r\n    const val SELLER = \"seller\"\r\n    const val PHOTO_URL = \"photo_url\"\r\n    const val USER_PREF = \"user_pref\"\r\n    const val CREATED_AT = \"created_at\"\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/utility/Constant.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/utility/Constant.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/utility/Constant.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/utility/Constant.kt	(date 1669195334259)
@@ -10,4 +10,5 @@
     const val PHOTO_URL = "photo_url"
     const val USER_PREF = "user_pref"
     const val CREATED_AT = "created_at"
+    const val READ_EXTERNAL = 300
 }
\ No newline at end of file
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">WiraJasa Bisnis</string>\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\r\n    <string name=\"serivce_register\">Serivce Register</string>\r\n    <string name=\"service_name\">Service Name</string>\r\n    <string name=\"address\">Address</string>\r\n    <string name=\"email\">Email</string>\r\n    <string name=\"phone_number\">Phone Number</string>\r\n    <string name=\"upload_photos\">Upload Photos</string>\r\n    <string name=\"open_service\">OPEN SERVICE</string>\r\n    <string name=\"save\">SAVE</string>\r\n    <string name=\"service_photo\">Service Photo</string>\r\n    <string name=\"image_icon\">Image Icon</string>\r\n    <string name=\"edit_service\">Edit Service</string>\r\n    <string name=\"password\">Password</string>\r\n    <string name=\"login\">Login</string>\r\n    <string name=\"or\">or</string>\r\n    <string name=\"register\">Register</string>\r\n    <string name=\"forgot_password\">Forgot Password?</string>\r\n    <string name=\"password_confirmation\">Password Confirmation</string>\r\n    <string name=\"have_an_account\">Have an account?</string>\r\n    <string name=\"forgot_password_2\">Forgot Password</string>\r\n    <string name=\"send_reset_link\">Send Reset Link</string>\r\n    <string name=\"input_address\">Input address</string>\r\n    <string name=\"input_phone_number\">Input phone number</string>\r\n    <string name=\"submit\">Submit</string>\r\n    <string name=\"register_success\">Account successfully created</string>\r\n    <string name=\"reset_success\">Email confirmation has been sent to you</string>\r\n    <string name=\"empty_invalid_email\">Email is empty or is not a valid email</string>\r\n    <string name=\"empty_password\">Password is empty or less than 8 characters</string>\r\n    <string name=\"empty_confirmation_password\">Confirmation password is empty or less than 8 characters</string>\r\n    <string name=\"different_password\">Password and Confirmation is not the same</string>\r\n    <string name=\"connection_error\">Check your connectivity and try again later</string>\r\n    <string name=\"invalid_email\">Email is not exist</string>\r\n    <string name=\"invalid_credential\">Email / Password is invalid</string>\r\n    <string name=\"invalid_account\">Account not found or has been suspended</string>\r\n    <string name=\"something_went_wrong\">Something went wrong</string>\r\n    <string name=\"loading\">Loading</string>\r\n    <string name=\"detail_picture\">Detail Picture</string>\r\n    <string name=\"contact_the_provider\">CONTACT THE PROVIDER</string>\r\n    <string name=\"lorem_ipsum\">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</string>\r\n    <string name=\"title\">Title</string>\r\n    <string name=\"price\">Rp. 00.000.00.,-</string>\r\n    <string name=\"edit_profile\">Edit</string>\r\n    <string name=\"register_as_seller\">Register as Seller</string>\r\n    <string name=\"profile\">Profile</string>\r\n    <string name=\"photo_profil\">photo_profil</string>\r\n    <string name=\"save_profile\">save</string>\r\n    <string name=\"change_password\">Change Password ?</string>\r\n    <string name=\"notification\">Notification</string>\r\n    <string name=\"logout\">Logout</string>\r\n    <string name=\"welcome_user\">Welcome %s</string>\r\n    <string name=\"signing_in\">Signing in…</string>\r\n    <string name=\"getting_profile\">Getting profile…</string>\r\n    <string name=\"signing_up\">Creating account…</string>\r\n    <string name=\"uploading_profile\">Creating profile…</string>\r\n</resources>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/res/values/strings.xml	(date 1669201892739)
@@ -55,4 +55,6 @@
     <string name="getting_profile">Getting profile…</string>
     <string name="signing_up">Creating account…</string>
     <string name="uploading_profile">Creating profile…</string>
+    <string name="buton_edit_photo">Buton Edit Photo</string>
+    <string name="updating_profile">Updating Profile Data…</string>
 </resources>
Index: app/src/main/res/drawable/ic_edit.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/ic_edit.xml b/app/src/main/res/drawable/ic_edit.xml
new file mode 100644
--- /dev/null	(date 1669194154741)
+++ b/app/src/main/res/drawable/ic_edit.xml	(date 1669194154741)
@@ -0,0 +1,5 @@
+<vector android:height="24dp" android:tint="#FFFFFF"
+    android:viewportHeight="24" android:viewportWidth="24"
+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
+    <path android:fillColor="@android:color/white" android:pathData="M3,17.25V21h3.75L17.81,9.94l-3.75,-3.75L3,17.25zM20.71,7.04c0.39,-0.39 0.39,-1.02 0,-1.41l-2.34,-2.34c-0.39,-0.39 -1.02,-0.39 -1.41,0l-1.83,1.83 3.75,3.75 1.83,-1.83z"/>
+</vector>
Index: app/src/main/java/com/wirajasa/wirajasabisnis/usecases/HandleException.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/usecases/HandleException.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/usecases/HandleException.kt
new file mode 100644
--- /dev/null	(date 1669193208879)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/usecases/HandleException.kt	(date 1669193208879)
@@ -0,0 +1,21 @@
+package com.wirajasa.wirajasabisnis.usecases
+
+import android.content.Context
+import com.google.firebase.auth.FirebaseAuthEmailException
+import com.google.firebase.auth.FirebaseAuthInvalidCredentialsException
+import com.google.firebase.auth.FirebaseAuthInvalidUserException
+import com.wirajasa.wirajasabisnis.R
+import java.io.IOException
+
+class HandleException {
+
+    fun getMessage(exception: Exception, context: Context): String {
+        return when (exception) {
+            is IOException -> context.getString(R.string.connection_error)
+            is FirebaseAuthEmailException -> context.getString(R.string.invalid_email)
+            is FirebaseAuthInvalidCredentialsException -> context.getString(R.string.invalid_credential)
+            is FirebaseAuthInvalidUserException -> context.getString(R.string.invalid_account)
+            else -> context.getString(R.string.something_went_wrong)
+        }
+    }
+}
\ No newline at end of file
Index: app/src/main/res/layout/activity_profile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/orange\">\r\n\r\n    <com.google.android.material.appbar.MaterialToolbar\r\n        android:id=\"@+id/toolbar_profile\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@color/orange\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:title=\"@string/profile\"\r\n        app:titleTextColor=\"@color/white\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/img_profile\"\r\n        android:layout_width=\"150dp\"\r\n        android:layout_height=\"150dp\"\r\n        android:layout_marginTop=\"64dp\"\r\n        android:contentDescription=\"@string/photo_profil\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/toolbar_profile\"\r\n        tools:src=\"@drawable/default_image\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tv_username\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"24dp\"\r\n        android:fontFamily=\"@font/inter_bold\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        android:textSize=\"24sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/img_profile\"\r\n        app:layout_constraintHorizontal_bias=\"0.463\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/img_profile\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/img_profile\"\r\n        tools:text=\"Kamil Malik\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tv_name\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:fontFamily=\"@font/inter_medium\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/tv_address\"\r\n        tools:text=\"12987319823\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tv_email\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"24dp\"\r\n        android:fontFamily=\"@font/inter_medium\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/tv_username\"\r\n        tools:text=\"test@gmail.com\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tv_phonenumber\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:fontFamily=\"@font/inter_medium\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/tv_email\"\r\n        tools:text=\"082259997760\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tv_address\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:fontFamily=\"@font/inter_medium\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/tv_phonenumber\"\r\n        tools:text=\"Jl. Kolonel Abunjani NO.32 Rt.21\" />\r\n\r\n    <com.google.android.material.button.MaterialButton\r\n        android:id=\"@+id/btn_edit\"\r\n        android:layout_width=\"200dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:backgroundTint=\"@color/dark_blue\"\r\n        android:fontFamily=\"@font/inter_bold\"\r\n        android:text=\"@string/edit_profile\"\r\n        android:textColor=\"@color/white\"\r\n        app:cornerRadius=\"5dp\"\r\n        app:layout_constraintBottom_toTopOf=\"@id/btn_register_seller\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/tv_name\"\r\n        app:layout_constraintVertical_chainStyle=\"packed\"\r\n        app:rippleColor=\"#004869\" />\r\n\r\n    <com.google.android.material.button.MaterialButton\r\n        android:id=\"@+id/btn_register_seller\"\r\n        android:layout_width=\"200dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"6dp\"\r\n        android:backgroundTint=\"@color/white\"\r\n        android:fontFamily=\"@font/inter_bold\"\r\n        android:text=\"@string/register_as_seller\"\r\n        android:textColor=\"@color/dark_blue\"\r\n        app:cornerRadius=\"5dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.505\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/btn_edit\"\r\n        app:layout_constraintVertical_chainStyle=\"packed\"\r\n        app:strokeColor=\"@color/dark_blue\"\r\n        app:strokeWidth=\"1dp\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_profile.xml b/app/src/main/res/layout/activity_profile.xml
--- a/app/src/main/res/layout/activity_profile.xml	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/res/layout/activity_profile.xml	(date 1669200544023)
@@ -15,117 +15,203 @@
         app:title="@string/profile"
         app:titleTextColor="@color/white" />
 
-    <ImageView
-        android:id="@+id/img_profile"
-        android:layout_width="150dp"
-        android:layout_height="150dp"
-        android:layout_marginTop="64dp"
-        android:contentDescription="@string/photo_profil"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@id/toolbar_profile"
-        tools:src="@drawable/default_image" />
+    <com.google.android.material.card.MaterialCardView
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="16dp"
+        android:layout_marginTop="16dp"
+        android:layout_marginEnd="16dp"
+        android:backgroundTint="@color/white"
+        app:cardCornerRadius="24dp"
+        app:layout_constraintTop_toBottomOf="@id/toolbar_profile"
+        tools:layout_editor_absoluteX="24dp">
+
+        <androidx.constraintlayout.widget.ConstraintLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content">
+
+            <ImageView
+                android:id="@+id/img_profile"
+                android:layout_width="150dp"
+                android:layout_height="150dp"
+                android:layout_marginTop="24dp"
+                android:contentDescription="@string/photo_profil"
+                app:layout_constraintBottom_toTopOf="@id/tv_username"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="parent"
+                tools:src="@drawable/default_image" />
 
-    <TextView
-        android:id="@+id/tv_username"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="24dp"
-        android:fontFamily="@font/inter_bold"
-        android:textAlignment="center"
-        android:textColor="@color/white"
-        android:textSize="24sp"
-        app:layout_constraintEnd_toEndOf="@+id/img_profile"
-        app:layout_constraintHorizontal_bias="0.463"
-        app:layout_constraintStart_toStartOf="@+id/img_profile"
-        app:layout_constraintTop_toBottomOf="@+id/img_profile"
-        tools:text="Kamil Malik" />
+            <TextView
+                android:id="@+id/tv_username"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="24dp"
+                android:layout_marginTop="16dp"
+                android:layout_marginEnd="24dp"
+                android:fontFamily="@font/inter_bold"
+                android:textAlignment="center"
+                android:textColor="@color/black"
+                android:textSize="24sp"
+                app:layout_constraintEnd_toEndOf="@+id/img_profile"
+                app:layout_constraintStart_toStartOf="@+id/img_profile"
+                app:layout_constraintTop_toBottomOf="@+id/img_profile"
+                tools:text="Kamil Malik" />
 
-    <TextView
-        android:id="@+id/tv_name"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="8dp"
-        android:fontFamily="@font/inter_medium"
-        android:textAlignment="center"
-        android:textColor="@color/white"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/tv_address"
-        tools:text="12987319823" />
+            <TextView
+                android:id="@+id/tv_name"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="24dp"
+                android:layout_marginTop="8dp"
+                android:layout_marginEnd="24dp"
+                android:fontFamily="@font/inter_medium"
+                android:textAlignment="center"
+                android:textColor="@color/black"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/tv_address"
+                tools:text="12987319823" />
 
-    <TextView
-        android:id="@+id/tv_email"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="24dp"
-        android:fontFamily="@font/inter_medium"
-        android:textAlignment="center"
-        android:textColor="@color/white"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/tv_username"
-        tools:text="test@gmail.com" />
+            <TextView
+                android:id="@+id/tv_email"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="24dp"
+                android:layout_marginTop="16dp"
+                android:layout_marginEnd="24dp"
+                android:fontFamily="@font/inter_medium"
+                android:textAlignment="center"
+                android:textColor="@color/black"
+                app:layout_constraintBottom_toTopOf="@id/tv_phonenumber"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/tv_username"
+                tools:text="test@gmail.com" />
 
-    <TextView
-        android:id="@+id/tv_phonenumber"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="8dp"
-        android:fontFamily="@font/inter_medium"
-        android:textAlignment="center"
-        android:textColor="@color/white"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/tv_email"
-        tools:text="082259997760" />
+            <TextView
+                android:id="@+id/tv_phonenumber"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="24dp"
+                android:layout_marginTop="8dp"
+                android:layout_marginEnd="24dp"
+                android:fontFamily="@font/inter_medium"
+                android:textAlignment="center"
+                android:textColor="@color/black"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/tv_email"
+                tools:text="082259997760" />
 
-    <TextView
-        android:id="@+id/tv_address"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="8dp"
-        android:fontFamily="@font/inter_medium"
-        android:textAlignment="center"
-        android:textColor="@color/white"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/tv_phonenumber"
-        tools:text="Jl. Kolonel Abunjani NO.32 Rt.21" />
+            <TextView
+                android:id="@+id/tv_address"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="24dp"
+                android:layout_marginTop="8dp"
+                android:layout_marginEnd="24dp"
+                android:fontFamily="@font/inter_medium"
+                android:textAlignment="center"
+                android:textColor="@color/black"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/tv_phonenumber"
+                tools:text="Jl. Kolonel Abunjani NO.32 Rt.21" />
 
-    <com.google.android.material.button.MaterialButton
-        android:id="@+id/btn_edit"
-        android:layout_width="200dp"
-        android:layout_height="wrap_content"
-        android:backgroundTint="@color/dark_blue"
-        android:fontFamily="@font/inter_bold"
-        android:text="@string/edit_profile"
-        android:textColor="@color/white"
-        app:cornerRadius="5dp"
-        app:layout_constraintBottom_toTopOf="@id/btn_register_seller"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/tv_name"
-        app:layout_constraintVertical_chainStyle="packed"
-        app:rippleColor="#004869" />
+            <com.google.android.material.button.MaterialButton
+                android:id="@+id/btn_edit"
+                android:layout_width="200dp"
+                android:layout_height="wrap_content"
+                android:layout_marginTop="16dp"
+                android:backgroundTint="@color/dark_blue"
+                android:fontFamily="@font/inter_bold"
+                android:text="@string/edit_profile"
+                android:textColor="@color/white"
+                app:cornerRadius="5dp"
+                app:layout_constraintBottom_toTopOf="@id/btn_register_seller"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/tv_name"
+                app:layout_constraintVertical_chainStyle="packed" />
 
-    <com.google.android.material.button.MaterialButton
-        android:id="@+id/btn_register_seller"
-        android:layout_width="200dp"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="6dp"
-        android:backgroundTint="@color/white"
-        android:fontFamily="@font/inter_bold"
-        android:text="@string/register_as_seller"
-        android:textColor="@color/dark_blue"
-        app:cornerRadius="5dp"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintHorizontal_bias="0.505"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@id/btn_edit"
-        app:layout_constraintVertical_chainStyle="packed"
-        app:strokeColor="@color/dark_blue"
-        app:strokeWidth="1dp" />
+            <com.google.android.material.button.MaterialButton
+                android:id="@+id/btn_register_seller"
+                android:layout_width="200dp"
+                android:layout_height="wrap_content"
+                android:layout_marginTop="8dp"
+                android:layout_marginBottom="24dp"
+                android:backgroundTint="@color/white"
+                android:fontFamily="@font/inter_bold"
+                android:text="@string/register_as_seller"
+                android:textColor="@color/dark_blue"
+                app:cornerRadius="5dp"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@id/btn_edit"
+                app:layout_constraintVertical_chainStyle="packed"
+                app:strokeColor="@color/dark_blue"
+                app:strokeWidth="1dp" />
 
+            <Space
+                android:id="@+id/spacer_bottom"
+                android:layout_width="match_parent"
+                android:layout_height="24dp"
+                android:visibility="gone"
+                app:layout_constraintTop_toBottomOf="@+id/btn_edit" />
+
+            <ImageButton
+                android:id="@+id/btn_edit_photo"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:backgroundTint="@color/orange"
+                android:contentDescription="@string/buton_edit_photo"
+                android:src="@drawable/ic_edit"
+                app:layout_constraintBottom_toBottomOf="@id/img_profile"
+                app:layout_constraintEnd_toEndOf="@id/img_profile"
+                app:tint="@color/white" />
+        </androidx.constraintlayout.widget.ConstraintLayout>
+    </com.google.android.material.card.MaterialCardView>
+
+    <com.google.android.material.floatingactionbutton.FloatingActionButton
+        android:id="@+id/fab_upload"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginEnd="24dp"
+        android:layout_marginBottom="24dp"
+        android:src="@drawable/ic_upload"
+        android:visibility="invisible"
+        app:backgroundTint="@color/white"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:tint="@color/dark_blue"
+        tools:visibility="visible" />
+
+    <ProgressBar
+        android:id="@+id/circle_loading"
+        android:layout_width="25dp"
+        android:layout_height="25dp"
+        android:layout_marginStart="16dp"
+        android:indeterminate="true"
+        android:indeterminateTint="@color/dark_blue"
+        android:visibility="gone"
+        app:layout_constraintBottom_toBottomOf="@+id/fab_upload"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="@+id/fab_upload"
+        tools:visibility="visible" />
+
+    <TextView
+        android:id="@+id/tv_loading"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="8dp"
+        android:fontFamily="@font/inter_bold"
+        android:text="Uploading"
+        android:textColor="@color/white"
+        android:visibility="gone"
+        app:layout_constraintBottom_toBottomOf="@id/circle_loading"
+        app:layout_constraintStart_toEndOf="@id/circle_loading"
+        app:layout_constraintTop_toTopOf="@id/circle_loading"
+        tools:visibility="visible" />
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/com/wirajasa/wirajasabisnis/di/AppModule.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.di\r\n\r\nimport android.content.Context\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.wirajasa.wirajasabisnis.data.repository.AuthRepository\r\nimport com.wirajasa.wirajasabisnis.data.repository.AuthRepositoryImpl\r\nimport dagger.Module\r\nimport dagger.Provides\r\nimport dagger.hilt.InstallIn\r\nimport dagger.hilt.android.qualifiers.ApplicationContext\r\nimport dagger.hilt.components.SingletonComponent\r\nimport kotlinx.coroutines.Dispatchers\r\nimport javax.inject.Singleton\r\n\r\n@Module\r\n@InstallIn(SingletonComponent::class)\r\nobject AppModule {\r\n\r\n    @Provides\r\n    @Singleton\r\n    fun provideAuthRepository(@ApplicationContext mContext: Context): AuthRepository {\r\n        return AuthRepositoryImpl(mContext, Firebase.auth, Firebase.firestore, Dispatchers.IO)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/di/AppModule.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/di/AppModule.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/di/AppModule.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/di/AppModule.kt	(date 1669197111629)
@@ -4,8 +4,11 @@
 import com.google.firebase.auth.ktx.auth
 import com.google.firebase.firestore.ktx.firestore
 import com.google.firebase.ktx.Firebase
+import com.google.firebase.storage.ktx.storage
 import com.wirajasa.wirajasabisnis.data.repository.AuthRepository
 import com.wirajasa.wirajasabisnis.data.repository.AuthRepositoryImpl
+import com.wirajasa.wirajasabisnis.data.repository.StorageRepository
+import com.wirajasa.wirajasabisnis.data.repository.StorageRepositoryImpl
 import dagger.Module
 import dagger.Provides
 import dagger.hilt.InstallIn
@@ -23,4 +26,10 @@
     fun provideAuthRepository(@ApplicationContext mContext: Context): AuthRepository {
         return AuthRepositoryImpl(mContext, Firebase.auth, Firebase.firestore, Dispatchers.IO)
     }
+
+    @Provides
+    @Singleton
+    fun provideStorageRepository(@ApplicationContext mContext: Context): StorageRepository {
+        return StorageRepositoryImpl(Firebase.storage, mContext, Dispatchers.IO)
+    }
 }
\ No newline at end of file
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n\r\n    <application\r\n        android:name=\".application.MyApp\"\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.WiraJasaBisnis\"\r\n        tools:targetApi=\"31\">\r\n\r\n        <activity\r\n            android:name=\".presentation.profile.ProfileActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".ui.user.UserValidation\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".ui.dashboard.BuyerDashboard\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".ui.dashboard.SellerDashboard\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".presentation.register.RegisterActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".presentation.reset_password.ResetPasswordActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".presentation.login.LoginActivity\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".presentation.main_activity.MainActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/AndroidManifest.xml	(date 1669195065835)
@@ -3,6 +3,9 @@
     xmlns:tools="http://schemas.android.com/tools">
 
     <uses-permission android:name="android.permission.INTERNET" />
+    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
+    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
+    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
 
     <application
         android:name=".application.MyApp"
Index: app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepository.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepository.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepository.kt
new file mode 100644
--- /dev/null	(date 1669198288739)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepository.kt	(date 1669198288739)
@@ -0,0 +1,10 @@
+package com.wirajasa.wirajasabisnis.data.repository
+
+import android.net.Uri
+import com.wirajasa.wirajasabisnis.utility.NetworkResponse
+import kotlinx.coroutines.flow.Flow
+
+interface StorageRepository {
+
+    fun uploadProfileImage(uri: Uri, uid: String): Flow<NetworkResponse<Uri>>
+}
\ No newline at end of file
Index: app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.presentation.profile\r\n\r\nimport androidx.lifecycle.ViewModel\r\nimport com.wirajasa.wirajasabisnis.data.model.UserProfile\r\nimport com.wirajasa.wirajasabisnis.data.repository.AuthRepository\r\nimport dagger.hilt.android.lifecycle.HiltViewModel\r\nimport javax.inject.Inject\r\n\r\n@HiltViewModel\r\nclass ProfileViewModel @Inject constructor(\r\n    private val authRepository: AuthRepository\r\n) : ViewModel() {\r\n\r\n    fun getUser() : UserProfile {\r\n       return authRepository.getLocalProfile()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileViewModel.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileViewModel.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileViewModel.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileViewModel.kt	(date 1669201084382)
@@ -1,17 +1,41 @@
 package com.wirajasa.wirajasabisnis.presentation.profile
 
+import android.net.Uri
+import androidx.lifecycle.LiveData
 import androidx.lifecycle.ViewModel
+import androidx.lifecycle.asLiveData
 import com.wirajasa.wirajasabisnis.data.model.UserProfile
 import com.wirajasa.wirajasabisnis.data.repository.AuthRepository
+import com.wirajasa.wirajasabisnis.data.repository.StorageRepository
+import com.wirajasa.wirajasabisnis.utility.NetworkResponse
 import dagger.hilt.android.lifecycle.HiltViewModel
+import kotlinx.coroutines.Dispatchers
+import kotlinx.coroutines.flow.Flow
+import java.io.File
 import javax.inject.Inject
 
 @HiltViewModel
 class ProfileViewModel @Inject constructor(
-    private val authRepository: AuthRepository
+    private val authRepository: AuthRepository,
+    private val storageRepository: StorageRepository
 ) : ViewModel() {
 
+    private var imageUri : String = ""
+
     fun getUser() : UserProfile {
        return authRepository.getLocalProfile()
     }
+
+    fun setNewImageUri(uri: Uri) {
+        imageUri = uri.toString()
+    }
+
+    fun uploadImage(uid: String) : LiveData<NetworkResponse<Uri>> {
+        val file = Uri.parse(imageUri)
+        return storageRepository.uploadProfileImage(file, uid).asLiveData(Dispatchers.Main)
+    }
+
+    fun updateProfile(profile: UserProfile) : LiveData<NetworkResponse<Boolean>> {
+        return authRepository.updateProfile(profile).asLiveData(Dispatchers.Main)
+    }
 }
\ No newline at end of file
Index: app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepositoryImpl.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepositoryImpl.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepositoryImpl.kt
new file mode 100644
--- /dev/null	(date 1669199723707)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/StorageRepositoryImpl.kt	(date 1669199723707)
@@ -0,0 +1,32 @@
+package com.wirajasa.wirajasabisnis.data.repository
+
+import android.content.Context
+import android.net.Uri
+import com.google.firebase.storage.FirebaseStorage
+import com.wirajasa.wirajasabisnis.usecases.HandleException
+import com.wirajasa.wirajasabisnis.utility.NetworkResponse
+import kotlinx.coroutines.flow.Flow
+import kotlinx.coroutines.flow.flow
+import kotlinx.coroutines.flow.flowOn
+import kotlinx.coroutines.flow.onStart
+import kotlinx.coroutines.tasks.await
+import javax.inject.Inject
+import kotlin.coroutines.CoroutineContext
+
+class StorageRepositoryImpl @Inject constructor(
+    private val firebaseStorage: FirebaseStorage,
+    private val context: Context,
+    private val ioDispatcher: CoroutineContext
+) : StorageRepository {
+
+    override fun uploadProfileImage(uri: Uri, uid: String): Flow<NetworkResponse<Uri>> =
+        flow {
+            try {
+                val task = firebaseStorage.reference.child("user/$uid.png").putFile(uri).await()
+                val photoUri = task.storage.downloadUrl.await()
+                emit(NetworkResponse.Success(photoUri))
+            } catch (e: Exception) {
+                emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
+            }
+        }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
+}
\ No newline at end of file
Index: app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.presentation.profile\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.view.Menu\r\nimport android.view.MenuItem\r\nimport androidx.activity.viewModels\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport com.bumptech.glide.Glide\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.wirajasa.wirajasabisnis.R\r\nimport com.wirajasa.wirajasabisnis.databinding.ActivityProfileBinding\r\nimport com.wirajasa.wirajasabisnis.presentation.login.LoginActivity\r\nimport dagger.hilt.android.AndroidEntryPoint\r\n\r\n@AndroidEntryPoint\r\nclass ProfileActivity : AppCompatActivity() {\r\n\r\n    private val viewModel: ProfileViewModel by viewModels()\r\n    private val binding by lazy {\r\n        ActivityProfileBinding.inflate(layoutInflater)\r\n    }\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setSupportActionBar(binding.toolbarProfile)\r\n        setContentView(binding.root)\r\n        val profile = viewModel.getUser()\r\n        binding.apply {\r\n            if (profile.photourl.isNotBlank())\r\n                Glide.with(this@ProfileActivity)\r\n                    .load(profile.photourl)\r\n                    .fitCenter()\r\n                    .circleCrop()\r\n                    .into(imgProfile)\r\n            else\r\n                Glide.with(this@ProfileActivity)\r\n                    .load(R.drawable.default_image)\r\n                    .fitCenter()\r\n                    .circleCrop()\r\n                    .into(imgProfile)\r\n\r\n            tvUsername.text = profile.username\r\n            tvEmail.text = Firebase.auth.currentUser?.email\r\n            tvAddress.text = profile.address\r\n            tvPhonenumber.text = profile.phone_number\r\n            tvName.text = profile.uid\r\n        }\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\r\n        menuInflater.inflate(R.menu.profile_menu, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        when (item.itemId) {\r\n            R.id.menu_logout -> Firebase.auth.signOut().also {\r\n                startActivity(\r\n                    Intent(\r\n                        this, LoginActivity::class.java\r\n                    ).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)\r\n                        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)\r\n                )\r\n            }\r\n        }\r\n        return true\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileActivity.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileActivity.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileActivity.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/presentation/profile/ProfileActivity.kt	(date 1669202582978)
@@ -1,22 +1,36 @@
 package com.wirajasa.wirajasabisnis.presentation.profile
 
+import android.Manifest
 import android.content.Intent
+import android.net.Uri
+import android.os.Build.VERSION
 import android.os.Bundle
 import android.view.Menu
 import android.view.MenuItem
+import android.view.View
+import android.widget.Toast
+import androidx.activity.result.ActivityResultLauncher
+import androidx.activity.result.contract.ActivityResultContracts
 import androidx.activity.viewModels
 import androidx.appcompat.app.AppCompatActivity
 import com.bumptech.glide.Glide
+import com.bumptech.glide.load.engine.DiskCacheStrategy
 import com.google.firebase.auth.ktx.auth
 import com.google.firebase.ktx.Firebase
 import com.wirajasa.wirajasabisnis.R
+import com.wirajasa.wirajasabisnis.data.model.UserProfile
 import com.wirajasa.wirajasabisnis.databinding.ActivityProfileBinding
 import com.wirajasa.wirajasabisnis.presentation.login.LoginActivity
+import com.wirajasa.wirajasabisnis.utility.Constant.READ_EXTERNAL
+import com.wirajasa.wirajasabisnis.utility.NetworkResponse
 import dagger.hilt.android.AndroidEntryPoint
+import pub.devrel.easypermissions.EasyPermissions
 
 @AndroidEntryPoint
-class ProfileActivity : AppCompatActivity() {
+class ProfileActivity : AppCompatActivity(), View.OnClickListener,
+    EasyPermissions.PermissionCallbacks {
 
+    private lateinit var profile: UserProfile
     private val viewModel: ProfileViewModel by viewModels()
     private val binding by lazy {
         ActivityProfileBinding.inflate(layoutInflater)
@@ -26,26 +40,31 @@
         super.onCreate(savedInstanceState)
         setSupportActionBar(binding.toolbarProfile)
         setContentView(binding.root)
-        val profile = viewModel.getUser()
+        profile = viewModel.getUser()
         binding.apply {
-            if (profile.photourl.isNotBlank())
-                Glide.with(this@ProfileActivity)
-                    .load(profile.photourl)
-                    .fitCenter()
-                    .circleCrop()
-                    .into(imgProfile)
-            else
-                Glide.with(this@ProfileActivity)
-                    .load(R.drawable.default_image)
-                    .fitCenter()
-                    .circleCrop()
-                    .into(imgProfile)
+            if (profile.photourl.isNotBlank()) Glide.with(this@ProfileActivity)
+                .load(profile.photourl).fitCenter().circleCrop().into(imgProfile)
+            else Glide.with(this@ProfileActivity).load(R.drawable.default_image).fitCenter()
+                .circleCrop().diskCacheStrategy(DiskCacheStrategy.ALL).into(imgProfile)
 
             tvUsername.text = profile.username
             tvEmail.text = Firebase.auth.currentUser?.email
             tvAddress.text = profile.address
             tvPhonenumber.text = profile.phone_number
             tvName.text = profile.uid
+
+            if (profile.seller) {
+                btnRegisterSeller.visibility = View.GONE
+                spacerBottom.visibility = View.VISIBLE
+            } else {
+                btnRegisterSeller.visibility = View.VISIBLE
+                spacerBottom.visibility = View.VISIBLE
+            }
+
+            btnEdit.setOnClickListener(this@ProfileActivity)
+            btnRegisterSeller.setOnClickListener(this@ProfileActivity)
+            btnEditPhoto.setOnClickListener(this@ProfileActivity)
+            fabUpload.setOnClickListener(this@ProfileActivity)
         }
     }
 
@@ -56,15 +75,137 @@
 
     override fun onOptionsItemSelected(item: MenuItem): Boolean {
         when (item.itemId) {
-            R.id.menu_logout -> Firebase.auth.signOut().also {
-                startActivity(
-                    Intent(
-                        this, LoginActivity::class.java
-                    ).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
-                        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
-                )
+            R.id.menu_logout -> {
+                Firebase.auth.signOut()
+                val intent = Intent(this, LoginActivity::class.java)
+                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
+                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
+                startActivity(intent.apply {
+                    addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
+                    addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
+                })
             }
         }
         return true
     }
+
+    override fun onClick(v: View?) {
+        when (v?.id) {
+            binding.btnEditPhoto.id -> startGallery()
+            binding.fabUpload.id -> {
+                viewModel.uploadImage(profile.uid).observe(this) {
+                    when (it) {
+                        is NetworkResponse.GenericException -> {
+                            isLoading(false)
+                        }
+                        NetworkResponse.Loading -> {
+                            isLoading(true)
+                        }
+                        is NetworkResponse.Success -> {
+                            profile.photourl = it.data.toString()
+                            Glide.with(this).load(it.data).fitCenter().circleCrop()
+                                .diskCacheStrategy(DiskCacheStrategy.AUTOMATIC)
+                                .into(binding.imgProfile)
+                            updateProfile()
+                        }
+                    }
+                }
+            }
+        }
+    }
+
+    private fun updateProfile() {
+        viewModel.updateProfile(profile).observe(this) {
+            when (it) {
+                is NetworkResponse.GenericException -> Toast.makeText(
+                    this, "Gagal", Toast.LENGTH_SHORT
+                ).show()
+                NetworkResponse.Loading -> binding.tvLoading.text =
+                    getString(R.string.updating_profile)
+                is NetworkResponse.Success -> {
+                    isLoading(false)
+                    Toast.makeText(this, "Sukses", Toast.LENGTH_SHORT).show()
+                }
+            }
+        }
+    }
+
+    private fun isLoading(loading: Boolean) {
+        if (loading) {
+            binding.fabUpload.visibility = View.INVISIBLE
+            binding.btnEditPhoto.visibility = View.INVISIBLE
+            binding.circleLoading.visibility = View.VISIBLE
+            binding.tvLoading.visibility = View.VISIBLE
+        } else {
+            binding.btnEditPhoto.visibility = View.VISIBLE
+            binding.circleLoading.visibility = View.GONE
+            binding.tvLoading.visibility = View.GONE
+        }
+    }
+
+
+    private val launcherIntentGallery: ActivityResultLauncher<Intent> = registerForActivityResult(
+        ActivityResultContracts.StartActivityForResult()
+    ) { result ->
+        if (result.resultCode == RESULT_OK) {
+            val selectedImg: Uri = result.data?.data as Uri
+            Glide.with(this).load(selectedImg).fitCenter().circleCrop().into(binding.imgProfile)
+            viewModel.setNewImageUri(selectedImg)
+            binding.fabUpload.visibility = View.VISIBLE
+        }
+    }
+
+    private fun startGallery() {
+        when {
+            VERSION.SDK_INT >= 33 -> {
+                if (EasyPermissions.hasPermissions(this, Manifest.permission.READ_MEDIA_IMAGES)) {
+                    launcherIntentGallery.launch(
+                        Intent.createChooser(
+                            Intent(Intent.ACTION_GET_CONTENT).setType("image/*"), "Pilih Gambar"
+                        )
+                    )
+                } else {
+                    EasyPermissions.requestPermissions(
+                        this,
+                        "Need external permission",
+                        READ_EXTERNAL,
+                        Manifest.permission.READ_MEDIA_IMAGES
+                    )
+                }
+            }
+            else -> {
+                if (EasyPermissions.hasPermissions(
+                        this, Manifest.permission.READ_EXTERNAL_STORAGE
+                    )
+                ) {
+                    launcherIntentGallery.launch(
+                        Intent.createChooser(
+                            Intent(Intent.ACTION_GET_CONTENT).setType("image/*"), "Pilih Gambar"
+                        )
+                    )
+                } else {
+                    EasyPermissions.requestPermissions(
+                        this,
+                        "Butuh Akses Galeri",
+                        READ_EXTERNAL,
+                        Manifest.permission.READ_EXTERNAL_STORAGE
+                    )
+                }
+            }
+        }
+    }
+
+    override fun onPermissionsGranted(requestCode: Int, perms: MutableList<String>) {
+        when (requestCode) {
+            READ_EXTERNAL -> startGallery()
+        }
+    }
+
+    override fun onPermissionsDenied(requestCode: Int, perms: MutableList<String>) {
+        when (requestCode) {
+            READ_EXTERNAL -> Toast.makeText(
+                this, "Butuh akses", Toast.LENGTH_SHORT
+            ).show()
+        }
+    }
 }
\ No newline at end of file
Index: app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepository.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.data.repository\r\n\r\nimport com.google.firebase.auth.FirebaseUser\r\nimport com.wirajasa.wirajasabisnis.data.model.UserProfile\r\nimport com.wirajasa.wirajasabisnis.utility.NetworkResponse\r\nimport kotlinx.coroutines.flow.Flow\r\n\r\ninterface AuthRepository {\r\n\r\n    fun signInWithEmailAndPassword(\r\n        email: String, password: String\r\n    ): Flow<NetworkResponse<FirebaseUser>>\r\n\r\n    fun signUpWithEmailAndPassword(\r\n        email: String, password: String\r\n    ): Flow<NetworkResponse<Boolean>>\r\n\r\n    fun registerDefaultProfile() : Flow<NetworkResponse<UserProfile>>\r\n\r\n    fun getUserProfile(): Flow<NetworkResponse<UserProfile>>\r\n\r\n    fun getLocalProfile(): UserProfile\r\n\r\n    fun resetPasswordWithEmail(\r\n        email: String\r\n    ): Flow<NetworkResponse<Boolean>>\r\n\r\n    fun getCurrentUser(): FirebaseUser?\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepository.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepository.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepository.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepository.kt	(date 1669200945086)
@@ -17,6 +17,8 @@
 
     fun registerDefaultProfile() : Flow<NetworkResponse<UserProfile>>
 
+    fun updateProfile(userProfile: UserProfile) : Flow<NetworkResponse<Boolean>>
+
     fun getUserProfile(): Flow<NetworkResponse<UserProfile>>
 
     fun getLocalProfile(): UserProfile
Index: app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepositoryImpl.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.wirajasa.wirajasabisnis.data.repository\r\n\r\n\r\nimport android.content.Context\r\nimport androidx.core.content.edit\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.*\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.FirebaseFirestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.wirajasa.wirajasabisnis.R\r\nimport com.wirajasa.wirajasabisnis.data.model.UserProfile\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.ADDRESS\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.COLLECTION_USER\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.CREATED_AT\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.PHONE_NUMBER\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.PHOTO_URL\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.SELLER\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.UID\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.USERNAME\r\nimport com.wirajasa.wirajasabisnis.utility.Constant.USER_PREF\r\nimport com.wirajasa.wirajasabisnis.utility.NetworkResponse\r\nimport kotlinx.coroutines.flow.Flow\r\nimport kotlinx.coroutines.flow.flow\r\nimport kotlinx.coroutines.flow.flowOn\r\nimport kotlinx.coroutines.flow.onStart\r\nimport kotlinx.coroutines.tasks.await\r\nimport java.io.IOException\r\nimport java.util.*\r\nimport javax.inject.Inject\r\nimport kotlin.coroutines.CoroutineContext\r\n\r\nclass AuthRepositoryImpl @Inject constructor(\r\n    private val context: Context,\r\n    private val auth: FirebaseAuth,\r\n    private val fireStore: FirebaseFirestore,\r\n    private val ioDispatcher: CoroutineContext\r\n) : AuthRepository {\r\n\r\n    override fun signInWithEmailAndPassword(\r\n        email: String, password: String\r\n    ): Flow<NetworkResponse<FirebaseUser>> = flow {\r\n        try {\r\n            auth.signInWithEmailAndPassword(email, password).await()\r\n            val currentUser = getCurrentUser() as FirebaseUser\r\n            emit(NetworkResponse.Success(data = currentUser))\r\n        } catch (e: Exception) {\r\n            emit(NetworkResponse.GenericException(getExceptionMessage(e)))\r\n        }\r\n    }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)\r\n\r\n    override fun signUpWithEmailAndPassword(\r\n        email: String, password: String\r\n    ): Flow<NetworkResponse<Boolean>> = flow {\r\n        try {\r\n            auth.createUserWithEmailAndPassword(email, password).await()\r\n            emit(NetworkResponse.Success(false))\r\n        } catch (e: Exception) {\r\n            emit(NetworkResponse.GenericException(getExceptionMessage(e)))\r\n        }\r\n    }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)\r\n\r\n    override fun registerDefaultProfile(): Flow<NetworkResponse<UserProfile>> =\r\n        flow {\r\n            try {\r\n                val currentUser = getCurrentUser() as FirebaseUser\r\n                val profile = UserProfile(\r\n                    uid = currentUser.uid,\r\n                    username = \"Guest${UUID.randomUUID()}\",\r\n                    address = \"Not Setup\",\r\n                    phone_number = \"Not Setup\",\r\n                    photourl = \"\",\r\n                    seller = false,\r\n                    createdAt = Timestamp.now().toDate().toString()\r\n                )\r\n                fireStore.collection(COLLECTION_USER).document(currentUser.uid).set(profile).await()\r\n                saveProfile(profile)\r\n                emit(NetworkResponse.Success(profile))\r\n            } catch (e: Exception) {\r\n                emit(NetworkResponse.GenericException(getExceptionMessage(e)))\r\n            }\r\n        }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)\r\n\r\n    override fun getUserProfile(): Flow<NetworkResponse<UserProfile>> =\r\n        flow {\r\n            try {\r\n                val uid = getCurrentUser()?.uid as String\r\n                val result = fireStore.collection(COLLECTION_USER).document(uid).get().await()\r\n                val profile = result.toObject(UserProfile::class.java) as UserProfile\r\n                saveProfile(profile)\r\n                emit(NetworkResponse.Success(profile))\r\n            } catch (e: Exception) {\r\n                emit(NetworkResponse.GenericException(getExceptionMessage(e)))\r\n            }\r\n        }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)\r\n\r\n    override fun getLocalProfile(): UserProfile {\r\n        val sharedPref = context.getSharedPreferences(USER_PREF, Context.MODE_PRIVATE)\r\n        return UserProfile(\r\n            uid = sharedPref.getString(UID, \"Empty\") as String,\r\n            username = sharedPref.getString(USERNAME, \"Empty\") as String,\r\n            address = sharedPref.getString(ADDRESS, \"Not setup\") as String,\r\n            phone_number = sharedPref.getString(PHONE_NUMBER, \"Not Setup\") as String,\r\n            photourl = sharedPref.getString(PHOTO_URL, \"\") as String,\r\n            seller = sharedPref.getBoolean(SELLER, false),\r\n            createdAt = sharedPref.getString(CREATED_AT, \"\") as String\r\n        )\r\n    }\r\n\r\n    override fun resetPasswordWithEmail(\r\n        email: String\r\n    ): Flow<NetworkResponse<Boolean>> = flow {\r\n        try {\r\n            auth.sendPasswordResetEmail(email).await()\r\n            emit(NetworkResponse.Success(data = true))\r\n        } catch (e: Exception) {\r\n            emit(NetworkResponse.GenericException(getExceptionMessage(e)))\r\n        }\r\n    }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)\r\n\r\n    override fun getCurrentUser(): FirebaseUser? {\r\n        return Firebase.auth.currentUser\r\n    }\r\n\r\n    private fun saveProfile(profile: UserProfile) {\r\n        context.getSharedPreferences(USER_PREF, Context.MODE_PRIVATE).edit {\r\n            putString(UID, profile.uid)\r\n            putString(USERNAME, profile.username)\r\n            putString(ADDRESS, profile.address)\r\n            putString(PHONE_NUMBER, profile.phone_number)\r\n            putString(PHOTO_URL, profile.photourl)\r\n            putBoolean(SELLER, profile.seller)\r\n            putString(CREATED_AT, profile.createdAt)\r\n            apply()\r\n        }\r\n    }\r\n\r\n    private fun getExceptionMessage(exception: Exception): String {\r\n        return when (exception) {\r\n            is IOException -> context.getString(R.string.connection_error)\r\n            is FirebaseAuthEmailException -> context.getString(R.string.invalid_email)\r\n            is FirebaseAuthInvalidCredentialsException -> context.getString(R.string.invalid_credential)\r\n            is FirebaseAuthInvalidUserException -> context.getString(R.string.invalid_account)\r\n            else -> context.getString(R.string.something_went_wrong)\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepositoryImpl.kt b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepositoryImpl.kt
--- a/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepositoryImpl.kt	(revision 6df1a86b385f2618911c35129a862e1373e257b6)
+++ b/app/src/main/java/com/wirajasa/wirajasabisnis/data/repository/AuthRepositoryImpl.kt	(date 1669201892724)
@@ -2,14 +2,17 @@
 
 
 import android.content.Context
+import android.net.Network
 import androidx.core.content.edit
 import com.google.firebase.Timestamp
-import com.google.firebase.auth.*
+import com.google.firebase.auth.FirebaseAuth
+import com.google.firebase.auth.FirebaseUser
 import com.google.firebase.auth.ktx.auth
 import com.google.firebase.firestore.FirebaseFirestore
+import com.google.firebase.firestore.SetOptions
 import com.google.firebase.ktx.Firebase
-import com.wirajasa.wirajasabisnis.R
 import com.wirajasa.wirajasabisnis.data.model.UserProfile
+import com.wirajasa.wirajasabisnis.usecases.HandleException
 import com.wirajasa.wirajasabisnis.utility.Constant.ADDRESS
 import com.wirajasa.wirajasabisnis.utility.Constant.COLLECTION_USER
 import com.wirajasa.wirajasabisnis.utility.Constant.CREATED_AT
@@ -25,7 +28,6 @@
 import kotlinx.coroutines.flow.flowOn
 import kotlinx.coroutines.flow.onStart
 import kotlinx.coroutines.tasks.await
-import java.io.IOException
 import java.util.*
 import javax.inject.Inject
 import kotlin.coroutines.CoroutineContext
@@ -45,7 +47,7 @@
             val currentUser = getCurrentUser() as FirebaseUser
             emit(NetworkResponse.Success(data = currentUser))
         } catch (e: Exception) {
-            emit(NetworkResponse.GenericException(getExceptionMessage(e)))
+            emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
         }
     }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
 
@@ -56,7 +58,7 @@
             auth.createUserWithEmailAndPassword(email, password).await()
             emit(NetworkResponse.Success(false))
         } catch (e: Exception) {
-            emit(NetworkResponse.GenericException(getExceptionMessage(e)))
+            emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
         }
     }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
 
@@ -77,10 +79,21 @@
                 saveProfile(profile)
                 emit(NetworkResponse.Success(profile))
             } catch (e: Exception) {
-                emit(NetworkResponse.GenericException(getExceptionMessage(e)))
+                emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
             }
         }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
 
+    override fun updateProfile(userProfile: UserProfile): Flow<NetworkResponse<Boolean>> = flow {
+        try {
+            saveProfile(userProfile)
+            fireStore.collection(COLLECTION_USER).document(userProfile.uid)
+                .set(userProfile, SetOptions.merge()).await()
+            emit(NetworkResponse.Success(true))
+        } catch (e: Exception) {
+            emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
+        }
+    }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
+
     override fun getUserProfile(): Flow<NetworkResponse<UserProfile>> =
         flow {
             try {
@@ -90,7 +103,7 @@
                 saveProfile(profile)
                 emit(NetworkResponse.Success(profile))
             } catch (e: Exception) {
-                emit(NetworkResponse.GenericException(getExceptionMessage(e)))
+                emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
             }
         }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
 
@@ -114,7 +127,7 @@
             auth.sendPasswordResetEmail(email).await()
             emit(NetworkResponse.Success(data = true))
         } catch (e: Exception) {
-            emit(NetworkResponse.GenericException(getExceptionMessage(e)))
+            emit(NetworkResponse.GenericException(HandleException().getMessage(e, context)))
         }
     }.onStart { emit(NetworkResponse.Loading) }.flowOn(ioDispatcher)
 
@@ -134,14 +147,4 @@
             apply()
         }
     }
-
-    private fun getExceptionMessage(exception: Exception): String {
-        return when (exception) {
-            is IOException -> context.getString(R.string.connection_error)
-            is FirebaseAuthEmailException -> context.getString(R.string.invalid_email)
-            is FirebaseAuthInvalidCredentialsException -> context.getString(R.string.invalid_credential)
-            is FirebaseAuthInvalidUserException -> context.getString(R.string.invalid_account)
-            else -> context.getString(R.string.something_went_wrong)
-        }
-    }
 }
\ No newline at end of file
Index: app/src/main/res/drawable/ic_upload.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/ic_upload.xml b/app/src/main/res/drawable/ic_upload.xml
new file mode 100644
--- /dev/null	(date 1669198288552)
+++ b/app/src/main/res/drawable/ic_upload.xml	(date 1669198288552)
@@ -0,0 +1,5 @@
+<vector android:height="24dp" android:tint="#FFFFFF"
+    android:viewportHeight="24" android:viewportWidth="24"
+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
+    <path android:fillColor="@android:color/white" android:pathData="M5,20h14v-2H5V20zM5,10h4v6h6v-6h4l-7,-7L5,10z"/>
+</vector>
